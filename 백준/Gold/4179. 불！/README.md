# [Gold IV] 불! - 4179 

[문제 링크](https://www.acmicpc.net/problem/4179) 

### 성능 요약

메모리: 64812 KB, 시간: 2008 ms

### 분류

너비 우선 탐색, 그래프 이론, 그래프 탐색

### 문제 설명

<p>지훈이는 미로에서 일을 한다. 지훈이를 미로에서 탈출하도록 도와주자!</p>

<p>미로에서의 지훈이의 위치와 불이 붙은 위치를 감안해서 지훈이가 불에 타기전에 탈출할 수 있는지의 여부, 그리고 얼마나 빨리 탈출할 수 있는지를 결정해야한다.</p>

<p>지훈이와 불은 매 분마다 한칸씩 수평또는 수직으로(비스듬하게 이동하지 않는다)  이동한다. </p>

<p>불은 각 지점에서 네 방향으로 확산된다. </p>

<p>지훈이는 미로의 가장자리에 접한 공간에서 탈출할 수 있다. </p>

<p>지훈이와 불은 벽이 있는 공간은 통과하지 못한다.</p>

### 입력 

 <p>입력의 첫째 줄에는 공백으로 구분된 두 정수 R과 C가 주어진다. 단, 1 ≤ R, C ≤ 1000 이다. R은 미로 행의 개수, C는 열의 개수이다.</p>

<p>다음 입력으로 R줄동안 각각의 미로 행이 주어진다.</p>

<p> 각각의 문자들은 다음을 뜻한다.</p>

<ul>
	<li>#: 벽</li>
	<li>.: 지나갈 수 있는 공간</li>
	<li>J: 지훈이의 미로에서의 초기위치 (지나갈 수 있는 공간)</li>
	<li>F: 불이 난 공간</li>
</ul>

<p>J는 입력에서 하나만 주어진다.</p>

### 출력 

 <p>지훈이가 불이 도달하기 전에 미로를 탈출 할 수 없는 경우 IMPOSSIBLE 을 출력한다.</p>

<p>지훈이가 미로를 탈출할 수 있는 경우에는 가장 빠른 탈출시간을 출력한다. </p>

### 반례 모음 
https://forward-gradually.tistory.com/52 

### 놓친 점
1. 불 BFS 구현
* 불이 여러 개인 경우, 시작점이 여러개인 BFS와 동일한 방식으로 구현한다. 즉, 여러 시작점을 미리 큐에 다 넣고 돌린다.
* 시작점에 대해서 큐에 넣기 전에 1로 표시해 방문처리를 한다. 추후 `기준 거리+1`와 원래 해당 거리를 비교했을 때 더 적은 값이 그 칸의 값이 되도록 한다
* 이렇게 돌고도 벽이나 기타 사항 때문에 . 인 영역이지만 접근을 못하는 칸이 존재할 수 있음을 고려한다.

2. 지훈 BFS 구현
* 지훈이 접근 가능한 칸
: 벽 X, 아직 방문하지 않은 곳, 불이 BFS 다 돌고도 .인 구역, 불이 접근한 시간 > 지훈이 기준 거리 + 1 인 곳

3. 순차적 실행 : 불 BFS -> 지훈 BFS
* 2중 for문 돌며 F인 위치 발견하면 그 때마다 불 bfs 돌고, 다시 2중 for문 돌면서 J인 위치 발견하면 그 때 지훈 BFS 도는 방식 -> `시간 초과 유발`
* 시작점이 여러개인 BFS와 동일한 방식으로 구현 -> 이중 for문 돌면서 불 시작점 발견하면 불을 위한 que에 넣고, 지훈 시작점을 발견하면 지훈을 위한 que에 넣는다. 이후 해당 que를 사용해 불과 지훈에 대한 bfs를 차례로 돌린다.
